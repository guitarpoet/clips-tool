{"version":3,"sources":["core/01_base.jsx","core/02_events.jsx","core/03_properties.jsx","core/04_ajax.jsx","ds/01_base.jsx"],"names":[],"mappings":"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","file":"lilium.js","sourcesContent":["//==============================================================================\n//\n// The fundation part, must at the very first of core, so name this using 0\n//\n// @author Jack\n// @version 1.0\n// @date Thu Jun 25 23:12:50 2015\n//\n//==============================================================================\n\n\n+(function(){\n\nclass Lilium {\n\n\tsourceMap() {\n\t\tif(this.inNode()) {\n\t\t\trequire('source-map-support').install();\n\t\t}\n\t}\n\n\tsplit(s, sep) {\n\t\treturn s.split(sep || ' ');\n\t}\n\n\tisString(o) {\n\t\treturn typeof o === 'string' || o instanceof String;\n\t}\n\n\tisObject(o) {\n\t\treturn o && (typeof o === \"object\");\n\t}\n\n\tinNode() {\n\t\treturn typeof GLOBAL == 'object';\n\t}\n\n\tglobal(name, value) {\n\t\tlet w = null;\n\t\tif(typeof window === 'undefined') { // Add global support for nodejs\n\t\t\tw = GLOBAL;\n\t\t}\n\t\telse {\n\t\t\tw = window;\n\t\t}\n\t\t\n\t\tif(name) {\n\t\t\tif(typeof value === 'undefined') {\n\t\t\t\treturn w[name];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tw[name] = value;\n\t\t\t}\n\t\t}\n\t\treturn w;\n\t}\n\n\tlocal(name, func) {\n\t\tlet f = this.global(name);\n\t\tif(typeof f === 'function') {\n\t\t\tf.alias = name;\n\t\t\treturn f;\n\t\t}\n\t\tif(func)\n\t\t\tfunc.alias = name;\n\t\treturn func;\n\t}\n\n\t/**\n\t * Test if the function is exists, if not exists then define it\n\t * NOTE: This will define the function into the global environment\n\t */\n\tdefineIfNotExists(name, func) {\n\t\tlet f = this.global(name);\n\t\tif(typeof f === 'function') {\n\t\t\tf.alias = name;\n\t\t\treturn f;\n\t\t}\n\t\tthis.global(name, func);\n\t\tif(func)\n\t\t\tfunc.alias = name;\n\t\treturn func;\n\t}\n\n\tremoveElement(a, e) {\n\t\tif(this.isArray(a)) {\n\t\t\tlet index = a.indexOf(e);\n\t\t\tif(index != -1)\n\t\t\t\treturn a.splice(index, 1);\n\t\t}\n\t\treturn [];\n\t}\n\n\tclone(a) {\n\t\tif(this.isArray(a))\n\t\t\treturn a.slice(0);\t\n\t\tif(this.isObject(a)) {\n\t\t\tlet ret = {};\n\t\t\tfor(let p in a) {\n\t\t\t\tret[p] = a[p];\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t\treturn null;\n\t}\n\n\tisArray(o) {\n\t\treturn Object.prototype.toString.call(o) === '[object Array]';\n\t}\n\n\tgetName(o) {\n\t\tif(o) {\n\t\t\tif(typeof o.alias !== 'undefined') {\n\t\t\t\treturn o.alias;\n\t\t\t}\n\t\t\tif(typeof o.name !== 'undefined') {\n\t\t\t\treturn o.name;\n\t\t\t}\n\t\t\tlet ret = o.toString();\n\t\t\tret = ret.substr('function '.length);\n\t\t\tret = ret.substr(0, ret.indexOf('('));\n\t\t\treturn ret;\n\t\t}\n\t\treturn null;\n\t}\n}\n\nvar lilium = new Lilium();\n\nlilium.sourceMap(); // Map the source codes to ease the debug process.\n\nlilium.defineIfNotExists('def', (name, func) => { return lilium.defineIfNotExists(name, func); });\n\ndef('lilium', lilium);\ndef('require', () => {}); // TODO: Define require if no require is defined\ndef('embed', (module) => {\n\tif(lilium[module]) {\n\t\treturn lilium[module];\n\t}\n\n\tlet m = require(module);\n\tif(m) {\n\t\treturn m;\n\t}\n\treturn null;\n});\n\n/**\n * Provide the widget and functions for module. This function will direct provide the Classes to the global lilium namespace\n * And if in browser context, won't provide any access to these exports other than global lilium namespace.\n */\ndef('provides', (widgets, module, global) => {\n\tvar e = null;\n\n\tif(!module) // lilium widgets are the default module\n\t\tmodule = 'widgets';\n\n\tif(typeof exports !== 'undefined') { // Prefer nodejs environment\n\t\te = exports;\n\t}\n\telse if(typeof window !== 'undefined') {\n\t\te = {};\t\n\t}\n\n\tif(lilium.isArray(widgets)) {\n\t\tfor(let widget of widgets) {\n\t\t\te[lilium.getName(widget)] = widget;\n\t\t}\n\t}\n\telse {\n\t\te[lilium.getName(widgets)] = widgets;\n\t}\n\t\n\tlilium[module] = lilium[module] || {};\n\n\tif(global) {\n\t\tvar g = lilium.global(module) || {};\n\t}\n\n\tfor(let k in e) {\n\t\tlilium[module][k] = e[k];\n\t\tif(global) {\n\t\t\tg[k] = e[k];\n\t\t}\n\t}\n\n\tif(global) {\n\t\tlilium.global(module, g);\n\t}\n});\n\nprovides([Lilium, def], 'core');\n\n})();\n","//==============================================================================\n//\n// The events foundation, will provides the crossplatform event support\n//\n// @author Jack\n// @version 1.0\n// @date Fri Jun 26 17:17:57 2015\n//\n//==============================================================================\n\n+(function(){\n\n//==============================================================================\n//\n// Util Functions\n//\n//==============================================================================\nconst slice          = Array.prototype.slice\nvar str2arr = (s, d) => { return s.split(d || ' ') }\nvar isString = (o) => { return typeof o == 'string' }\nvar isFunction = (o) => { return typeof o == 'function' }\nvar selectorEngine = lilium.local('selectorEngine', (s, r) => { return r.querySelectorAll(s); });\n\n//==============================================================================\n//\n// Definitions\n//\n//==============================================================================\nconst win = lilium.global();\nconst navigator = typeof navigator !== 'undefined' ? navigator : {};\nconst namespaceRegex = /[^\\.]*(?=\\..*)\\.|.*/;\nconst nameRegex      = /\\..*/;\nconst addEvent       = 'addEventListener';\nconst removeEvent    = 'removeEventListener';\nconst doc            = typeof document !== 'undefined' ? document : {};\nconst root           = doc.documentElement || {};\nconst W3C_MODEL      = root[addEvent];\nconst eventSupport   = W3C_MODEL ? addEvent : 'attachEvent';\nconst ONE            = {} // singleton for quick matching making add() do one()\n\nconst standardNativeEvents =\n\t'click dblclick mouseup mousedown contextmenu '                  + // mouse buttons\n\t'mousewheel mousemultiwheel DOMMouseScroll '                     + // mouse wheel\n\t'mouseover mouseout mousemove selectstart selectend '            + // mouse movement\n\t'keydown keypress keyup '                                        + // keyboard\n\t'orientationchange '                                             + // mobile\n\t'focus blur change reset select submit '                         + // form elements\n\t'load unload beforeunload resize move DOMContentLoaded '         + // window\n\t'readystatechange message '                                      + // window\n\t'error abort scroll ';                                             // misc\n\n// element.fireEvent('onXYZ'... is not forgiving if we try to fire an event\n// that doesn't actually exist, so make sure we only do these on newer browsers\nconst w3cNativeEvents =\n\t'show '                                                          + // mouse buttons\n\t'input invalid '                                                 + // form elements\n\t'touchstart touchmove touchend touchcancel '                     + // touch\n\t'gesturestart gesturechange gestureend '                         + // gesture\n\t'textinput '                                                     + // TextEvent\n\t'readystatechange pageshow pagehide popstate '                   + // window\n\t'hashchange offline online '                                     + // window\n\t'afterprint beforeprint '                                        + // printing\n\t'dragstart dragenter dragover dragleave drag drop dragend '      + // dnd\n\t'loadstart progress suspend emptied stalled loadmetadata '       + // media\n\t'loadeddata canplay canplaythrough playing waiting seeking '     + // media\n\t'seeked ended durationchange timeupdate play pause ratechange '  + // media\n\t'volumechange cuechange '                                        + // media\n\t'checking noupdate downloading cached updateready obsolete ';      // appcache\n\nconst nativeEvents = (function (hash, events, i) {\n        for (i = 0; i < events.length; i++) events[i] && (hash[events[i]] = 1)\n        return hash\n      }({}, str2arr(standardNativeEvents + (W3C_MODEL ? w3cNativeEvents : ''))));\n\nconst customEvents = (function () {\n\tvar isAncestor = 'compareDocumentPosition' in root ? function (element, container) {\n\t\treturn container.compareDocumentPosition && (container.compareDocumentPosition(element) & 16) === 16\n\t}\n\t: 'contains' in root ? function (element, container) {\n\t\tcontainer = container.nodeType === 9 || container === window ? root : container\n\t\treturn container !== element && container.contains(element)\n\t}\n\t: function (element, container) {\n\t\twhile (element = element.parentNode) if (element === container) return 1\n\t\treturn 0\n\t}\n\n\tvar check = function (event) {\n\t\tvar related = event.relatedTarget\n\t\treturn !related\n\t\t\t? related == null\n\t\t\t: (related !== this && related.prefix !== 'xul' && !/document/.test(this.toString())\n\t\t\t\t&& !isAncestor(related, this))\n\t}\n\t\n\treturn {\n\t\tmouseenter: { base: 'mouseover', condition: check }\n\t  , mouseleave: { base: 'mouseout', condition: check }\n\t  , mousewheel: { base: /Firefox/.test(navigator.userAgent) ? 'DOMMouseScroll' : 'mousewheel' }\n\t}\n}());\n\nvar commonProps = str2arr('altKey attrChange attrName bubbles cancelable ctrlKey currentTarget ' +\n\t'detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey '  +\n\t'srcElement target timeStamp type view which propertyName');\nvar mouseProps = commonProps.concat(str2arr('button buttons clientX clientY dataTransfer '      +\n\t'fromElement offsetX offsetY pageX pageY screenX screenY toElement'));\nvar mouseWheelProps = mouseProps.concat(str2arr('wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ ' +\n'axis')); // 'axis' is FF specific\nvar keyProps = commonProps.concat(str2arr('char charCode key keyCode keyIdentifier '          +\n\t'keyLocation location'));\nvar textProps = commonProps.concat(str2arr('data'));\nvar touchProps = commonProps.concat(str2arr('touches targetTouches changedTouches scale rotation'));\nvar messageProps = commonProps.concat(str2arr('data origin source'));\nvar stateProps = commonProps.concat(str2arr('state'));\nvar overOutRegex = /over|out/;\n// some event types need special handling and some need special properties, do that all here\nvar typeFixers = [\n\t{ // key events\n\t\treg: /key/i\n\t\t, fix: (event, newEvent) => {\n\t\t\tnewEvent.keyCode = event.keyCode || event.which\n\t\t\treturn keyProps\n\t\t}\n\t},\n\t{ // mouse events\n\t\treg: /click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i\n\t\t, fix: (event, newEvent, type) => {\n\t\t\tnewEvent.rightClick = event.which === 3 || event.button === 2;\n\t\t\tnewEvent.pos = { x: 0, y: 0 };\n\t\t\tif (event.pageX || event.pageY) {\n\t\t\t\tnewEvent.clientX = event.pageX\n\t\t\t\tnewEvent.clientY = event.pageY\n\t\t\t} else if (event.clientX || event.clientY) {\n\t\t\t\tnewEvent.clientX = event.clientX + doc.body.scrollLeft + root.scrollLeft\n\t\t\t\tnewEvent.clientY = event.clientY + doc.body.scrollTop + root.scrollTop\n\t\t\t}\n\t\t\tif (overOutRegex.test(type)) {\n\t\t\t\tnewEvent.relatedTarget = event.relatedTarget\n\t\t\t\t|| event[(type == 'mouseover' ? 'from' : 'to') + 'Element']\n\t\t\t}\n\t\t\treturn mouseProps\n\t\t}\n\t},\n\t{ // mouse wheel events\n\t\treg: /mouse.*(wheel|scroll)/i\n\t\t, fix: () => { return mouseWheelProps }\n\t}, \n\t{ // TextEvent\n\t\treg: /^text/i\n\t\t, fix: () => { return textProps }\n\t},\n\t{ // touch and gesture events\n\t\treg: /^touch|^gesture/i\n\t\t, fix: () => { return touchProps }\n\t},\n\t{ // message events\n\t\treg: /^message$/i\n\t\t, fix: () => { return messageProps }\n\t},\n\t{ // popstate events\n\t\treg: /^popstate$/i\n\t\t, fix: () => { return stateProps }\n\t},\n\t{ // everything else\n\t\treg: /.*/\n\t\t, fix: () => { return commonProps }\n\t}\n];\n\n//==============================================================================\n//\n// Functions\n//\n//==============================================================================\n\nvar targetElement = (element, isNative) => {\n\treturn !W3C_MODEL && !isNative && (element === doc || element === win) ? root : element;\n}\nvar wrappedHandler = (element, fn, condition, args) => {\n\tvar call = (event, eargs) => {\n\t\treturn fn.apply(element, args ? slice.call(eargs, event ? 0 : 1).concat(args) : eargs)\n\t}\n\tvar findTarget = (event, eventElement) => {\n\t\treturn fn.__beanDel ? fn.__beanDel.ft(event.target, element) : eventElement\n\t}\n\tvar handler = condition\n\t? function (event) {\n\t\tvar target = findTarget(event, this) // deleated event\n\t\tif (condition.apply(target, arguments)) {\n\t\t\tif (event)\n\t\t\t\tevent.currentTarget = target\n\t\t\treturn call(event, arguments)\n\t\t}\n\t}\n\t: function (event) {\n\t\tif (fn.__beanDel)\n\t\t\tevent = event.clone(findTarget(event)) // delegated event, fix the fix\n\t\treturn call(event, arguments)\n\t}\n\thandler.__beanDel = fn.__beanDel\n\treturn handler\n}\n\n//==============================================================================\n//\n// Classes\n//\n//==============================================================================\n\nclass Event {\n\tconstructor(event, element, isNative) {\n\t\tif (!arguments.length) return;\n\n\t\tevent = event || ((element.ownerDocument || element.document || element).parentWindow || win).event;\n\t\tthis.originalEvent = event;\n\t\tthis.isNative = isNative;\n\t\tthis.isBean = true;\n\n\t\tif (!event) return;\n\n\t\tlet type = event.type;;\n\t\tlet target = event.target || event.srcElement;\n\t\tlet i, l, p, props, fixer;\n\t\tlet typeFixerMap = {};\n\n\t\tthis.target = target && target.nodeType === 3 ? target.parentNode : target\n\n\t\tif (isNative) { // we only need basic augmentation on custom events, the rest expensive & pointless\n\t\t\tfixer = typeFixerMap[type];\n\t\t\tif (!fixer) { // haven't encountered this event type before, map a fixer function for it\n\t\t\t\tfor (i = 0, l = typeFixers.length; i < l; i++) {\n\t\t\t\t\tif (typeFixers[i].reg.test(type)) { // guaranteed to match at least one, last is .*\n\t\t\t\t\t\ttypeFixerMap[type] = fixer = typeFixers[i].fix;\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprops = fixer(event, this, type);\n\t\t\tfor (i = props.length; i--;) {\n\t\t\t\tif (!((p = props[i]) in this) && p in event) this[p] = event[p];\n\t\t\t}\n\t\t}\n\t}\n\n\tpreventDefault() {\n\t\tif (this.originalEvent.preventDefault)\n\t\t\tthis.originalEvent.preventDefault();\n\t\telse \n\t\t\tthis.originalEvent.returnValue = false;\n\t}\n\t\n\tstopPropagation() {\n\t\tif (this.originalEvent.stopPropagation)\n\t\t\tthis.originalEvent.stopPropagation();\n\t\telse \n\t\t\tthis.originalEvent.cancelBubble = true;\n\t}\n\n\tstop() {\n\t\tthis.preventDefault();\n\t\tthis.stopPropagation();\n\t\tthis.stopped = true;\n\t}\n\n\tstopImmediatePropagation() {\n\t\tif (this.originalEvent.stopImmediatePropagation)\n\t\t\tthis.originalEvent.stopImmediatePropagation();\n\t\tthis.isImmediatePropagationStopped = () => { return true }\n\t}\n\n\tisImmediatePropagationStopped() {\n\t\treturn this.originalEvent.isImmediatePropagationStopped && this.originalEvent.isImmediatePropagationStopped()\n\t}\n\n\tclone(currentTarget) {\n\t\tvar ne = new Event(this, this.element, this.isNative);\n\t\tne.currentTarget = currentTarget;\n\t\treturn ne;\n\t}\n}\n\nclass RegEntry {\n\tconstructor(element, type, handler, original, namespaces, args, root) {\n\t\tvar customType = customEvents[type]\n\t\tvar isNative = false;\n\t\tif (type == 'unload') {\n\t\t\t// self clean-up\n\t\t\thandler = once(removeListener, element, type, handler, original)\n\t\t}\n\n\t\tif (customType) {\n\t\t\tif (customType.condition) {\n\t\t\t\thandler = wrappedHandler(element, handler, customType.condition, args)\n\t\t\t}\n\t\t\ttype = customType.base || type\n\t\t}\n\n\t\tthis.isNative      = isNative = nativeEvents[type] && !!element[eventSupport]\n\t\tthis.customType    = !W3C_MODEL && !isNative && type\n\t\tthis.element       = element\n\t\tthis.type          = type\n\t\tthis.original      = original\n\t\tthis.namespaces    = namespaces\n\t\tthis.eventType     = W3C_MODEL || isNative ? type : 'propertychange'\n\t\tthis.target        = targetElement(element, isNative)\n\t\tthis[eventSupport] = !!this.target[eventSupport]\n\t\tthis.root          = root\n\t\tthis.handler       = wrappedHandler(element, handler, null, args)\n\t}\n\n\tinNamespaces(checkNamespaces) {\n\t\tvar i, j, c = 0;\n\t\tif (!checkNamespaces) return true;\n\t\tif (!this.namespaces) return false;\n\t\tfor (i = checkNamespaces.length; i--;) {\n\t\t\tfor (j = this.namespaces.length; j--;) {\n\t\t\t\tif (checkNamespaces[i] == this.namespaces[j])\n\t\t\t\t\tc++;\n\t\t\t}\n\t\t}\n\t\treturn checkNamespaces.length === c;\n\t}\n\n\tmatches(checkElement, checkOriginal, checkHandler) {\n\t\treturn this.element === checkElement &&\n\t\t\t(!checkOriginal || this.original === checkOriginal) &&\n\t\t\t(!checkHandler || this.handler === checkHandler)\n\t}\n}\n\nclass Registry {\n\tconstructor() {\n        // our map stores arrays by event type, just because it's better than storing\n        // everything in a single array.\n        // uses '$' as a prefix for the keys for safety and 'r' as a special prefix for\n        // rootListeners so we can look them up fast\n\t\tthis.map = {};\n\t}\n\n\t// generic functional search of our registry for matching listeners,\n\t// `fn` returns false to break out of the loop\n\tforAll(element, type, original, handler, root, fn) {\n\t\tlet pfx = root ? 'r' : '$'\n\t\tif (!type || type == '*') {\n\t\t\t// search the whole registry\n\t\t\tfor (let t in this.map) {\n\t\t\t\tif (t.charAt(0) == pfx) {\n\t\t\t\t\tthis.forAll(element, t.substr(1), original, handler, root, fn)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlet i = 0, l, list = this.map[pfx + type], all = element == '*';\n\t\t\tif (!list) return;\n\t\t\tfor (l = list.length; i < l; i++) {\n\t\t\t\tif ((all || list[i].matches(element, original, handler)) && !fn(list[i], list, i, type))\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\thas(element, type, original, root) {\n\t\t// we're not using forAll here simply because it's a bit slower and this\n\t\t// needs to be fast\n\t\tvar i, list = this.map[(root ? 'r' : '$') + type];\n\t\tif (list) {\n\t\t\tfor (i = list.length; i--;) {\n\t\t\t\tif (!list[i].root && list[i].matches(element, original, null))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tget(element, type, original, root) {\n\t\tvar entries = [];\n\t\tthis.forAll(element, type, original, null, root, (entry) => {\n\t\t\treturn entries.push(entry);\n\t\t})\n\t\treturn entries;\n\t}\n\n\tput(entry) {\n\t\tvar has = !entry.root && !this.has(entry.element, entry.type, null, false);\n\t\tvar key = (entry.root ? 'r' : '$') + entry.type;\n\t\t(this.map[key] || (this.map[key] = [])).push(entry);\n\t\treturn has;\n\t}\n\tdel(entry) {\n\t\tthis.forAll(entry.element, entry.type, null, entry.handler, entry.root, (entry, list, i) => {\n\t\t\tlist.splice(i, 1);\n\t\t\tentry.removed = true;\n\t\t\tif (list.length === 0) delete this.map[(entry.root ? 'r' : '$') + entry.type]\n\t\t\t\treturn false;\n\t\t});\n\t}\n\n\tentries() {\n\t\tvar t, entries = [];\n\t\tfor (t in this.map) {\n\t\t\tif (t.charAt(0) == '$')\n\t\t\t\tentries = entries.concat(this.map[t]);\n\t\t}\n\t\treturn entries;\n\t}\n}\n\nclass EventSource {\n\taddListener(event, func) {\n\t\tevents.on(this, event, func);\n\t}\n\n\tremoveListener(event, func) {\n\t\tevents.off(this, event, func);\n\t}\n\t\n\tfire(event, args) {\n\t\tevents.fire(this, event, args);\n\t}\n}\n\n//==============================================================================\n//\n// Variables\n//\n//==============================================================================\n\nvar registry = new Registry();\n\nvar rootListener = function(event, type) {\n\tif (!W3C_MODEL && type && event && event.propertyName != '_on' + type)\n\t\treturn;\n\n\tvar listeners = registry.get(this, type || event.type, null, false);\n\tvar l = listeners.length;\n\tvar i = 0;\n\n\tevent = new Event(event, this, true);\n\tif (type)\n\t\tevent.type = type;\n\n\t// iterate through all handlers registered for this type, calling them unless they have\n\t// been removed by a previous handler or stopImmediatePropagation() has been called\n\tfor(let item of listeners) {\n\t\tif(event.isImmediatePropagationStopped()) {\n\t\t\tbreak;\n\t\t}\n\t\tif(!item.removed) {\n\t\t\titem.handler.call(this, event);\n\t\t}\n\t}\n};\n\nvar listener = W3C_MODEL\n? (element, type, add) => {\n\t// new browsers\n\telement[add ? addEvent : removeEvent](type, rootListener, false)\n}\n: (element, type, add, custom) => {\n\t// IE8 and below, use attachEvent/detachEvent and we have to piggy-back propertychange events\n\t// to simulate event bubbling etc.\n\tvar entry;\n\tif (add) {\n\t\tregistry.put(entry = new RegEntry(\n\t\t\telement\n\t\t\t, custom || type\n\t\t\t, (event) => { // handler\n\t\t\t\trootListener.call(element, event, custom)\n\t\t\t}\n\t\t\t, rootListener\n\t\t\t, null\n\t\t\t, null\n\t\t\t, true // is root\n\t\t));\n\t\tif (custom && element['_on' + custom] == null)\n\t\t\telement['_on' + custom] = 0;\n\t\tentry.target.attachEvent('on' + entry.eventType, entry.handler)\n\t} \n\telse {\n\t\tentry = registry.get(element, custom || type, rootListener, true)[0];\n\t\tif (entry) {\n\t\t\tentry.target.detachEvent('on' + entry.eventType, entry.handler)\n\t\t\tregistry.del(entry)\n\t\t}\n\t}\n}\n\nvar once = (rm, element, type, fn, originalFn) => {\n\t// wrap the handler in a handler that does a remove as well\n\treturn () => {\n\t\tfn.apply(this, arguments)\n\t\trm(element, type, originalFn)\n\t}\n}\n\nvar removeListener = (element, orgType, handler, namespaces) => {\n\tlet type = orgType && orgType.replace(nameRegex, '');\n\tlet handlers = registry.get(element, type, null, false);\n\tlet removed  = {};\n\n\tfor(let item of handlers) {\n\t\tif((!handler || item.original === handler) && item.inNamespaces(namespaces)) {\n\t\t\t// TODO: this is problematic, we have a registry.get() and registry.del() that\n\t\t\t// both do registry searches so we waste cycles doing this. Needs to be rolled into\n\t\t\t// a single registry.forAll(fn) that removes while finding, but the catch is that\n\t\t\t// we'll be splicing the arrays that we're iterating over. Needs extra tests to\n\t\t\t// make sure we don't screw it up. @rvagg\n\t\t\tregistry.del(item);\n\t\t\tif (!removed[item.eventType] && item[eventSupport]) {\n\t\t\t\tremoved[item.eventType] = { t: item.eventType, c: item.type };\n\t\t\t}\n\t\t}\n\t}\n\n\t// check each type/element for removed listeners and remove the rootListener where it's no longer needed\n\tfor (let i in removed) {\n\t\tif (!registry.has(element, removed[i].t, null, false)) {\n\t\t\t// last listener of this type, remove the rootListener\n\t\t\tlistener(element, removed[i].t, false, removed[i].c)\n\t\t}\n\t}\n}\n\nvar delegate = (selector, fn) => {\n\t//TODO: findTarget (therefore $) is called twice, once for match and once for\n\t// setting e.currentTarget, fix this so it's only needed once\n\tvar findTarget = (target, root) => {\n\t\tvar i, array = isString(selector) ? selectorEngine(selector, root) : selector\n\t\tfor (; target && target !== root; target = target.parentNode) {\n\t\t\tfor (i = array.length; i--;) {\n\t\t\t\tif (array[i] === target)\n\t\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\t}\n\n\tvar handler = (e) => {\n\t\tvar match = findTarget(e.target, this)\n\t\tif (match)\n\t\t\tfn.apply(match, arguments)\n\t}\n\n\t// __beanDel isn't pleasant but it's a private function, not exposed outside of Bean\n\thandler.__beanDel = {\n\t\tft : findTarget // attach it here for customEvents to use too\n\t\t, selector : selector\n\t}\n\treturn handler;\n}\n\nvar fireListener = W3C_MODEL ? (isNative, type, element) => {\n\t// modern browsers, do a proper dispatchEvent()\n\tvar evt = doc.createEvent(isNative ? 'HTMLEvents' : 'UIEvents');\n\tevt[isNative ? 'initEvent' : 'initUIEvent'](type, true, true, win, 1);\n\telement.dispatchEvent(evt);\n} \n: (isNative, type, element) => {\n\t// old browser use onpropertychange, just increment a custom property to trigger the event\n\telement = targetElement(element, isNative);\n\tisNative ? element.fireEvent('on' + type, doc.createEventObject()) : element['_on' + type]++;\n}\n\n\n/**\n * off(element[, eventType(s)[, handler ]])\n */\nvar off = (element, typeSpec, fn) => {\n\tvar isTypeStr = isString(typeSpec);\n\tvar k, type, namespaces, i;\n\n\tif (isTypeStr && typeSpec.indexOf(' ') > 0) {\n\t\t// off(el, 't1 t2 t3', fn) or off(el, 't1 t2 t3')\n\t\tfor(let item of str2arr(typeSpec)) {\n\t\t\toff(element, item, fn)\n\t\t}\n\t\treturn element;\n\t}\n\n\ttype = isTypeStr && typeSpec.replace(nameRegex, '');\n\tif (type && customEvents[type])\n\t\ttype = customEvents[type].base;\n\n\tif (!typeSpec || isTypeStr) {\n\t\t// off(el) or off(el, t1.ns) or off(el, .ns) or off(el, .ns1.ns2.ns3)\n\t\tif (namespaces = isTypeStr && typeSpec.replace(namespaceRegex, ''))\n\t\t\tnamespaces = str2arr(namespaces, '.');\n\t\tremoveListener(element, type, fn, namespaces);\n\t}\n\telse if (isFunction(typeSpec)) {\n\t\t// off(el, fn)\n\t\tremoveListener(element, null, typeSpec);\n\t}\n\telse {\n\t\t// off(el, { t1: fn1, t2, fn2 })\n\t\tfor (k in typeSpec) {\n\t\t\tif (typeSpec.hasOwnProperty(k))\n\t\t\t\toff(element, k, typeSpec[k]);\n\t\t}\n\t}\n\n\treturn element;\n}\n\n/**\n* on(element, eventType(s)[, selector], handler[, args ])\n*/\nvar on = (element, events, selector, fn) => {\n\tvar originalFn, type, types, i, args, entry, first;\n\n\t//TODO: the undefined check means you can't pass an 'args' argument, fix this perhaps?\n\tif (selector === undefined && typeof events == 'object') {\n\t\t//TODO: this can't handle delegated events\n\t\tfor (type in events) {\n\t\t\tif (events.hasOwnProperty(type)) {\n\t\t\t\ton.call(this, element, type, events[type])\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tif (!isFunction(selector)) {\n\t\t// delegated event\n\t\toriginalFn = fn;\n\t\targs       = slice.call(arguments, 4);\n\t\tfn         = delegate(selector, originalFn, selectorEngine);\n\t}\n\telse {\n\t\targs       = slice.call(arguments, 3);\n\t\tfn         = originalFn = selector;\n\t}\n\n\ttypes = str2arr(events)\n\n\t// special case for one(), wrap in a self-removing handler\n\tif (this === ONE) {\n\t\tfn = once(off, element, events, fn, originalFn);\n\t}\n\n\tfor (i = types.length; i--;) {\n\t\t// add new handler to the registry and check if it's the first for this element/type\n\t\tfirst = registry.put(entry = new RegEntry(\n\t\t\telement\n\t\t\t, types[i].replace(nameRegex, '') // event type\n\t\t\t, fn\n\t\t\t, originalFn\n\t\t\t, str2arr(types[i].replace(namespaceRegex, ''), '.') // namespaces\n\t\t\t, args\n\t\t\t, false // not root\n\t\t));\n\t\tif (entry[eventSupport] && first) {\n\t\t\t// first event of this type on this element, add root listener\n\t\t\tlistener(element, entry.eventType, true, entry.customType);\n\t\t}\n\t}\n\n\treturn element;\n}\n\n/**\n * one(element, eventType(s)[, selector], handler[, args ])\n */\nvar one = () => {\n\treturn on.apply(ONE, arguments);\n}\n\n/**\n * fire(element, eventType(s)[, args ])\n *\n * The optional 'args' argument must be an array, if no 'args' argument is provided\n * then we can use the browser's DOM event system, otherwise we trigger handlers manually\n */\nvar fire = (element, type, args) => {\n\tvar types = str2arr(type);\n\tvar i, j, l, names, handlers;\n\n\tfor (i = types.length; i--;) {\n\t\ttype = types[i].replace(nameRegex, '');\n\t\tif (names = types[i].replace(namespaceRegex, ''))\n\t\t\tnames = str2arr(names, '.');\n\n\t\tif (!names && !args && element[eventSupport]) {\n\t\t\tfireListener(nativeEvents[type], type, element)\n\t\t}\n\t\telse {\n\t\t\t// non-native event, either because of a namespace, arguments or a non DOM element\n\t\t\t// iterate over all listeners and manually 'fire'\n\t\t\thandlers = registry.get(element, type, null, false)\n\t\t\targs = [false].concat(args)\n\t\t\tfor(let handler of handlers) {\n\t\t\t\tif (handler.inNamespaces(names)) {\n\t\t\t\t\thandler.handler.apply(element, args);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn element;\n}\n\nvar clone = (element, from, type) => {\n\tvar handlers = registry.get(from, type, null, false)\n\tvar l = handlers.length;\n\tvar i = 0;\n\tvar args, beanDel;\n\n\tfor(let handler of handlers) {\n\t\tif (handler.original) {\n\t\t\targs = [ element, handler.type ]\n\t\t\tif (beanDel = handler.handler.__beanDel)\n\t\t\t\targs.push(beanDel.selector)\n\t\t\targs.push(handler.original)\n\t\t\ton.apply(null, args)\n\t\t}\n\t}\n\treturn element;\n}\n\nvar events = {\n\t  'on'                : on\n\t, 'one'               : one\n\t, 'off'               : off\n\t, 'remove'            : off\n\t, 'clone'             : clone\n\t, 'fire'              : fire\n\t, 'Event'             : Event\n}\n\n// for IE, clean up on unload to avoid leaks\nif (win.attachEvent) {\n\tvar cleanup = () => {\n\t\tvar i, entries = registry.entries()\n\t\tfor (i in entries) {\n\t\t\tif (entries[i].type && entries[i].type !== 'unload')\n\t\t\t\toff(entries[i].element, entries[i].type);\n\t\t}\n\t\twin.detachEvent('onunload', cleanup)\n\t\twin.CollectGarbage && win.CollectGarbage()\n\t}\n\twin.attachEvent('onunload', cleanup)\n}\n\nlilium.global('events', events);\nlilium.events = events;\n\nprovides([EventSource], 'core');\n\n})();\n","//==============================================================================\n//\n// The fundation part, must at the very first of core, so name this using 0\n//\n// @author Jack\n// @version 1.0\n// @date Thu Jun 25 23:12:50 2015\n//\n//==============================================================================\n\n+(function(){\n\n/**\n * The simple property source base class to provde the base get and set functions\n */\nclass PropertySource extends lilium.core.EventSource {\n\tget(name, default_value) {\n\t\treturn this[name]? this[name]: default_value;\n\t}\n\n\tset(name, value) {\n\t\tthis.fire('change', {\n\t\t\t'target': this,\n\t\t\t'propertyName': name,\n\t\t\t'value': value,\t\n\t\t\t'orig_value': this[name]\n\t\t});\n\t\tthis[name] = value;\n\t}\n}\n\nclass TreeNodeIterator {\n\tconstructor(node, type) {\n\t\tif(!type || type == 'depth') {\n\t\t\tthis.type = 'depth';\n\t\t}\n\t\telse {\n\t\t\tthis.type = 'spread';\n\t\t}\n\t\tthis.node = node;\n\t\tthis.current = node;\n\t\tthis.stack = [this.current];\n\t}\n\n\tpath() {\n\t\treturn this.current.path();\n\t}\n\n\tnext() {\n\t\tvar orig = this.current;\n\t\twhile(this.stack.length && orig == this.current) {\n\t\t\tif(this.type == 'spread') {\n\t\t\t\tthis.current = this.stack.shift();\n\t\t\t\tif(this.current.children) {\n\t\t\t\t\tfor(let child of this.current.children) {\n\t\t\t\t\t\tthis.stack.push(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\t\n\t\t\telse {\n\t\t\t\tthis.current = this.stack.pop();\n\t\t\t\tif(this.current.children) { // Add current ndoe's children to stack\n\t\t\t\t\tfor(let i = this.current.children.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tthis.stack.push(this.current.children[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar done = false;\n\t\tif(orig == this.current) {\n\t\t\tthis.current = null;\n\t\t\tdone = true;\n\t\t}\n\t\treturn {\n\t\t\tvalue: this.current,\n\t\t\tdone: done\n\t\t};\n\t}\n}\n\nclass TreePropertySourceNode extends lilium.core.EventSource {\n\tconstructor(name, parent, value) {\n\t\tsuper();\n\t\tthis.parent = parent;\n\t\tif(parent && parent instanceof TreePropertySourceNode) {\n\t\t\tparent.appendChild(this);\n\t\t}\n\t\tthis.name = name;\n\t\tif(value)\n\t\t\tthis.value = value;\n\n\t}\n\n\tclear() {\n\t\tif(this.children) {\n\t\t\tfor(let child of this.children) {\n\t\t\t\tif(child) {\n\t\t\t\t\tchild.clear(); // Clear the children of child to remove all the event handlers\n\t\t\t\t}\n\t\t\t\tthis.removeChild(child);\n\t\t\t}\n\t\t}\n\t}\n\n\tnextSibling() {\n\t\tif(this.parent) {\n\t\t\tlet i = this.parent.children.indexOf(this);\n\t\t\tif(i != -1 && i + 1 < this.parent.children.length) {\n\t\t\t\treturn this.parent.children[i + 1];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprevSibling() {\n\t\tif(this.parent) {\n\t\t\tlet i = this.parent.children.indexOf(this);\n\t\t\tif(i != -1 && i > 0) {\n\t\t\t\treturn this.parent.children[i - 1];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tremoveChild(child) {\n\t\tif(child && this.children) {\n\t\t\tchild.parent = null;\n\t\t\tlilium.removeElement(this.children, child);\t\n\t\t\tevents.off(child, 'change'); // Remove all the change listeners\n\t\t}\n\t}\n\n\tappendChild(child) {\n\t\tif(!this.children)\n\t\t\tthis.children = [];\n\t\tthis.children.push(child);\n\t\tchild.parent = this;\n\t}\n\n\tpath() {\n\t\tlet path = [];\n\t\tlet n = this;\n\t\twhile(n) {\n\t\tif(n.name) // Ignore the node that has no name(usually the root node)\n\t\t\t\tpath.unshift(n.name);\t\n\t\t\tn = n.parent;\n\t\t}\n\t\treturn path.join('.');\n\t}\n\n\tkey() {\n\t\treturn this.path();\n\t}\n\n\t/**\n\t * Generate the children tree\n\t */\n\tchildTree(names) {\n\t\tif(lilium.isArray(names)) {\n\t\t\tvar cs = [];\n\t\t\tvar child = null;\n\t\t\twhile(names.length) {\n\t\t\t\tchild = this.child(lilium.clone(names));\n\t\t\t\tif(child) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tvar n = names.pop();\n\t\t\t\tif(n) {\n\t\t\t\t\tcs.unshift(n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar p = child? child: this;\n\t\t\tfor(let c of cs) {\n\t\t\t\tchild = new TreePropertySourceNode(c, p);\t\n\t\t\t\tp = child;\n\t\t\t}\n\t\t\treturn child;\n\t\t}\n\t\telse {\n\t\t\treturn this.childTree(names.split(\".\"));\n\t\t}\n\t}\n\n\t/**\n\t * Get the child by its name\n\t */\n\tchild(names) {\n\t\tif(lilium.isArray(names)) {\n\t\t\tlet node = this;\n\t\t\twhile(names.length) {\n\t\t\t\tlet n = names.shift();\n\t\t\t\tif(n) {\n\t\t\t\t\tnode = node.child(n);\t\t\n\t\t\t\t\tif(!node)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(node != this)\n\t\t\t\treturn node;\n\t\t}\n\t\telse {\n\t\t\tif(this.children) {\n\t\t\t\tfor(let child of this.children) {\n\t\t\t\t\tif(child.name == names)\n\t\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n\nclass TreePropertySource extends TreePropertySourceNode {\n\tget(name, default_value) {\n\t\tlet n = this.childTree(name);\n\t\treturn n? n.value: default_value;\t\n\t}\n\n\twatch(name, func) {\n\t\tthis.change(name, func);\n\t}\n\n\tchange(name, func) {\n\t\tvar n = this.childTree(name);\n\t\tif(n) {\n\t\t\tn.addListener('change', func);\n\t\t}\n\t\treturn this;\n\t}\n\n\tset(name, value) {\n\t\tvar n = this.childTree(name);\n\t\tvar event = {\n\t\t\t'target': n,\n\t\t\t'currentTarget': n,\n\t\t\t'propertyName': name,\n\t\t\t'value': value,\t\n\t\t\t'orig_value': n.value\n\t\t};\n\n\t\tvar p = n;\n\t\t// balloon event\n\t\twhile(p && !event.stop) {\n\t\t\tlet e = lilium.clone(event);\n\t\t\te.currentTarget = p;\n\t\t\tp.fire('change', e);\n\t\t\tp = p.parent;\n\t\t}\n\n\t\tn.value = value;\n\t}\n}\n\nprovides([PropertySource, TreePropertySourceNode, TreePropertySource, TreeNodeIterator], 'core');\n\n})();\n","//==============================================================================\n//\n// The cross platform ajax support part. This part will support nodejs and\n// all the mainstream browsers.\n//\n// Will use XMLHttpRequest as default implementation, and will use nodejs's\n// xmlhttprequest as the implmenentation in nodejs.\n//\n// @author Jack\n// @version 1.0\n// @date Sat Jun 27 13:29:22 2015\n//\n//==============================================================================\n\n+(function(){\n\n\n/**\n * The Ajax api that uses ES6 Promise, you can use as this:\n * \n * <code>\n * \t\tAjax.get('/a.json')\n * \t\t\t.then(function(data) { console.info(data); })\n * \t\t\t.catch(function(error) { console.info(error); });\n * </code>\n */\nclass Ajax {\n\tconstructor() {\n\t\tthis.xhr = this.getXhr();\n\t}\n\n\tget(url, data, headers) {\n\t\treturn this.exec('GET', url, data, headers);\n\t}\n\n\tpost(url, data, headers) {\n\t\treturn this.exec('POST', url, data, headers);\n\t}\n\n\tput(url, data, headers) {\n\t\treturn this.exec('PUT', url, data, headers);\n\t}\n\n\tdelete(url, headers) {\n\t\treturn this.exec('DELETE', url, null, headers);\n\t}\n\n\thead(url, data, headers) {\n\t\treturn this.exec('HEAD', url, data, headers);\n\t}\n\n\texec(method, url, data, headers) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet payload;\n\t\t\tlet data = data || {};\n\t\t\tlet headers = headers || {};\n\n\t\t\t// Generate payload\n\t\t\tpayload = this._encode(data);\n\t\t\tif (method === 'GET' && payload) {\n\t\t\t\turl += '?' + payload;\n\t\t\t\tpayload = null;\n\t\t\t}\n\n\t\t\t// open xhr\n\t\t\tthis.xhr.open(method, url);\n\n\t\t\t// Setting headers\n\t\t\tlet content_type = this.content_type || 'application/x-www-form-urlencoded';\n\t\t\tfor (let h in headers) {\n\t\t\t\tif (headers.hasOwnProperty(h)) {\n\t\t\t\t\tif (h.toLowerCase() === 'content-type')\n\t\t\t\t\t\tcontent_type = headers[h];\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.xhr.setRequestHeader(h, headers[h]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.xhr.setRequestHeader('Content-type', content_type);\n\n\t\t\t// Handle timeout\n\t\t\tif(this.timeout && this.timeout > 0) {\n\t\t\t\tvar xhr = this.xhr;\n\t\t\t\tthis.timeout_handle = setTimeout(() => {\n\t\t\t\t\treject('TIMEOUT', 'Ajax request to url ' + url + ' has timeout!');\n\t\t\t\t\txhr.abort();\n\t\t\t\t}, this.timeout);\n\t\t\t}\n\n\t\t\t// Handle response\n\t\t\tthis.xhr.onreadystatechange = () => {\n\t\t\t\tif (this.xhr.readyState === 4) {\n\t\t\t\t\tif (this.timeout_handle) {\n\t\t\t\t\t\tclearTimeout(this.timeout_handle);\n\t\t\t\t\t}\n\t\t\t\t\tif(!this.xhr.status || (this.xhr.status < 200 || this.xhr.status >= 300) && this.xhr.status !== 304) {\n\t\t\t\t\t\treject(this.xhr.status, this.xhr.responseText, xhr);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresolve(this.xhr.responseText, xhr);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.xhr.send(payload);\n\t\t});\n\t}\n\n\t_encode(data) {\n\t\tlet payload = \"\";\n\t\tif (typeof data === \"string\") {\n\t\t\tpayload = data;\n\t\t} \n\t\telse {\n\t\t\tlet e = encodeURIComponent;\n\t\t\tlet params = [];\n\n\t\t\tfor (let k in data) {\n\t\t\t\tif (data.hasOwnProperty(k)) {\n\t\t\t\t\tparams.push(e(k) + '=' + e(data[k]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tpayload = params.join('&')\n\t\t}\n\t\treturn payload;\n\t}\n\n\tgetXhr() {\n\t\tif(typeof XMLHttpRequest !== 'undefined') {\n\t\t\treturn new XMLHttpRequest();\n\t\t}\n\t\telse {\n\t\t\tif(typeof ActiveXObject !== 'undefined')\n\t\t\t\treturn new ActiveXObject(\"Microsoft.XMLHTTP\");\n\t\t\telse {\n\t\t\t\tlet x = embed('xmlhttprequest').XMLHttpRequest;\n\t\t\t\treturn new x();\n\t\t\t}\n\t\t}\n\t}\n}\n\nprovides([Ajax], 'core');\n\n})();\n","//==============================================================================\n//\n// The base definitions for DataStore\n//\n// @author Jack\n// @version 1.0\n// @date Sat Jun 27 21:03:32 2015\n//\n//==============================================================================\n\n+(function(){\n\n/**\n * The DataSource is a tree property source, and it can copy the value\n * of a standard JavaScript object to the destination path.\n */\nclass DataStore extends lilium.core.TreePropertySource {\n\tconstructor(data) {\n\t\tsuper();\n\t\tif(data) {\n\t\t\tif(lilium.isArray(data)) {\n\t\t\t\tfor(let i = 0; i < data.length; i++) {\n\t\t\t\t\tthis.copy(data[i], i + '');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(lilium.isObject(data)) {\n\t\t\t\tthis.copy(data);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\t * Iterate all the entries in this DataStore using depth or spread\n\t * algorithm. You can call the key and value function of the entry\n\t * to get the key and the value\n\t */\n\tentries(alg) {\n\t\tthis[Symbol.iterator] = () => {\n\t\t\treturn new lilium.core.TreeNodeIterator(this, alg);\n\t\t}\n\t\treturn this;\n\t}\n\n\tkeys(alg) {\n\t\tvar r = [];\n\t\tfor(let e of this.entries(alg)) {\n\t\t\tr.push(e.key());\n\t\t}\n\t}\n\n\tcopy(data, path) {\n\t\tvar n = path? this.childTree(path): null;\n\n\t\tif(n) {\n\t\t\tn.value = data;\n\t\t}\n\n\t\tif(lilium.isObject(data)) {\n\t\t\tfor(let k in data) {\n\t\t\t\tlet v = data[k];\n\t\t\t\tlet p = path ? path + '.' + k : k;\n\t\t\t\tif(lilium.isObject(v) && !lilium.isArray(v)) {\n\t\t\t\t\tthis.copy(v, p);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.set(p, v);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nprovides([DataStore], 'ds');\n\n})();\n"]}